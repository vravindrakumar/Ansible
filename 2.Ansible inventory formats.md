#Ansible inventory formats

Ansible inventories are essential for defining the systems and hosts that Ansible will manage. The inventory can be written in several formats, each with its syntax and use cases. Hereâ€™s an overview of the most common inventory formats in Ansible:

### 1. **INI Format**
The INI format is one of the simplest and most widely used formats in Ansible inventories. It organizes hosts and groups in a straightforward, human-readable manner.

**Example:**

```ini
[webservers]
webserver1 ansible_host=192.168.1.10
webserver2 ansible_host=192.168.1.11

[dbservers]
dbserver1 ansible_host=192.168.1.20
dbserver2 ansible_host=192.168.1.21

[all:vars]
ansible_user=admin
ansible_ssh_private_key_file=/path/to/private_key.pem
```

- **[webservers]** and **[dbservers]**: These are groups that contain the hosts (webserver1, webserver2, etc.).
- **ansible_host**: Specifies the IP address or hostname of the host.
- **[all:vars]**: Defines variables that apply to all hosts.

### 2. **YAML Format**
YAML is a more structured and powerful format for inventories, especially useful when defining complex variables and configurations.

**Example:**

```yaml
all:
  vars:
    ansible_user: admin
    ansible_ssh_private_key_file: /path/to/private_key.pem
  children:
    webservers:
      hosts:
        webserver1:
          ansible_host: 192.168.1.10
        webserver2:
          ansible_host: 192.168.1.11
    dbservers:
      hosts:
        dbserver1:
          ansible_host: 192.168.1.20
        dbserver2:
          ansible_host: 192.168.1.21
```

- **all:** The root of the inventory, containing all hosts and groups.
- **vars:** Global variables applied to all hosts.
- **children:** Defines groups of hosts.
- **hosts:** Defines individual hosts and their specific variables.

### 3. **Scripted/Dynamic Inventory**
Dynamic inventories are generated by scripts, allowing you to pull inventory information from external sources like cloud providers (AWS, Azure, etc.), CMDBs, or databases. These inventories are more flexible and automatically updated.

**Example (Python script):**

```python
#!/usr/bin/env python

import json

inventory = {
    "webservers": {
        "hosts": ["webserver1", "webserver2"],
        "vars": {
            "ansible_user": "admin",
            "ansible_ssh_private_key_file": "/path/to/private_key.pem"
        }
    },
    "dbservers": {
        "hosts": ["dbserver1", "dbserver2"]
    },
    "_meta": {
        "hostvars": {
            "webserver1": {"ansible_host": "192.168.1.10"},
            "webserver2": {"ansible_host": "192.168.1.11"},
            "dbserver1": {"ansible_host": "192.168.1.20"},
            "dbserver2": {"ansible_host": "192.168.1.21"}
        }
    }
}

print(json.dumps(inventory))
```

- The script outputs JSON that Ansible can consume.
- **_meta:** Contains additional metadata about hosts.

You would typically use this script by setting the `inventory` parameter in your Ansible command to point to the script:

```bash
ansible-playbook -i inventory_script.py playbook.yml
```

### 4. **Combined Format**
You can combine INI and YAML formats, where the INI format is used for simplicity, and YAML for complex variables. 

**Example:**

```ini
[webservers]
webserver1
webserver2

[dbservers]
dbserver1
dbserver2
```

```yaml
all:
  vars:
    ansible_user: admin
    ansible_ssh_private_key_file: /path/to/private_key.pem

  hosts:
    webserver1:
      ansible_host: 192.168.1.10
    webserver2:
      ansible_host: 192.168.1.11
    dbserver1:
      ansible_host: 192.168.1.20
    dbserver2:
      ansible_host: 192.168.1.21
```

- You might use an INI file for grouping hosts and YAML for detailed variables.


This method is useful for large environments with complex configurations. Ansible will automatically read files in these directories when running a playbook.

Each format and method has its advantages depending on your environment's complexity and your need for dynamic updates.